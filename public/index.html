<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Bender âˆž</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
    <script src="https://unpkg.com/webrtc-adapter/out/adapter.js"></script>
    <!-- <script src="https://aframe.io/releases/0.5.0/aframe.min.js"></script> -->
    <!-- <script type="text/javascript" src="bundle.js" charset="utf-8"></script> -->
    <script src="./build.js"></script>
    <script src="./app.js"></script>
    <script src="https://unpkg.com/aframe-video-billboard"></script> 
    <script src="./aframe-cubemap-component.js"></script>
  </head>
  <body>
    <div id="app"></div>
    <!-- A frame scene + chat -->
    <div id="scene-and-chat">
    <!-- A frame scene  -->
	    <div id="aframe-div">
	    	<a-scene id="aframe-scene">
					<a-assets>	
				  </a-assets>
				  <!-- background image -->
				   <a-entity cubemap="folder: /images/textures/SanFrancisco4/"></a-entity>

				   <!-- table top -->

				   <a-cylinder transparent="true" opacity="2" color="#424242" height="3" radius="1.5" scale="5 0.05 5" position="0 -2.12 0"></a-cylinder>
				  
		      <a-video-billboard id="guest1" video-billboard="minWidth: 10;" position="-8.66 1.25 -5" rotation ="0 60 0"></a-video-billboard>

		      <a-video-billboard id="guest2" video-billboard="minWidth: 10;" position="8.66 1.25 -5" rotation ="0 -60 0"></a-video-billboard>
		      <a-entity id="camera-wrapper" position="0 0 10">
		      	<a-camera wasd-controls-enabled="true"></a-camera>
		      </a-entity>
		    </a-scene>
	    </div>
		  <!-- end aframe scene -->
		  <!-- Text chat -->
		  <div id="chat">
		  	<div id="message-log">
			   	<ul id="messages">
					</ul>
			 </div>
			 <div>
				<form id="sendMessage" action="">
					<!-- <button id="enable">Enable Speech to Text </button>
					<button id="disable">Disable Speech to Text </button> -->
					<input type="text" x-webkit-speech id="m" autocomplete="off" /><button id="sendTextMessage">Send</button>
				</form>
		   </div>
		  </div>
	  <!-- End text chat -->
	  </div>
	  <!-- End A frame scene + chat -->

    <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
		  crossorigin="anonymous"></script>

		<script src="/socket.io/socket.io.js"></script>
			<script>
				var socket = io();

		  	$('#sendTextMessage').click(function(e){
		  		console.log('socket', socket)
		  		e.preventDefault();
		    	socket.emit('chat message', $('#m').val());
		    $('#m').val('');
		    return false;
		  	});
		  	socket.on('chat message', function(msg){
		   		$('#messages').append($('<li>').text(socket.id + ' says: ' + msg));
		  		console.log('message to append: ', msg)
		  	});
			</script>
		</script>
  </body>
</html>
